(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-contents-userinfo"],{5096:function(t,e,i){"use strict";i.r(e);var a=i("d230"),s=i.n(a);for(var n in a)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(n);e["default"]=s.a},"7a29":function(t,e,i){"use strict";i.r(e);var a=i("c35f"),s=i("5096");for(var n in s)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return s[t]}))}(n);var o=i("f0c5"),c=Object(o["a"])(s["default"],a["b"],a["c"],!1,null,"6d767dea",null,!1,a["a"],void 0);e["default"]=c.exports},c35f:function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){}));var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"userpost userIndex",class:t.AppStyle},[a("v-uni-view",{staticClass:"header",class:t.scrollTop>40?"goScroll":"",style:[{height:t.CustomBar+"px"}]},[a("v-uni-view",{staticClass:"cu-bar",style:{height:t.CustomBar+"px","padding-top":t.StatusBar+"px"}},[a("v-uni-view",{staticClass:"action",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.back.apply(void 0,arguments)}}},[a("v-uni-text",{staticClass:"cuIcon-back"})],1),a("v-uni-view",{staticClass:"content text-bold",style:[{top:t.StatusBar+"px"}]},[t.scrollTop>40?[t._v(t._s(t.name)+"的主页")]:t._e()],2),a("v-uni-view",{staticClass:"action",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toSearch.apply(void 0,arguments)}}},[a("v-uni-text",{staticClass:"cuIcon-search"})],1)],1)],1),a("v-uni-view",{staticClass:"all-box",staticStyle:{"margin-top":"-10upx"}},[a("v-uni-view",{staticClass:"user-info",style:"padding-top:"+t.NavBar+"px;"},[a("v-uni-view",{staticClass:"user-info-bg"},[a("v-uni-image",{attrs:{src:t.avatar,mode:"aspectFill"}})],1),a("v-uni-view",{staticClass:"user-info-main"},[a("v-uni-view",{staticClass:"user-info-content"},[a("v-uni-view",{staticClass:"user-info-col"},[a("v-uni-view",{staticClass:"user-header"},[a("v-uni-image",{attrs:{src:t.avatar}})],1),a("v-uni-view",{staticClass:"user-text"},[a("v-uni-text",{staticClass:"user-info-name"},[t.isvip>0?[1==t.vip?[a("v-uni-text",{staticClass:"text-red"},[t._v(t._s(t.name))])]:[a("v-uni-text",{staticClass:"text-yellow"},[t._v(t._s(t.name))])]]:[t._v(t._s(t.name))]],2),a("v-uni-text",{staticClass:"userlv",style:t.getUserLvStyle(t.lv)},[t._v(t._s(t.getUserLv(t.lv)))]),t.customize&&""!=t.customize?a("v-uni-text",{staticClass:"userlv customize"},[t._v(t._s(t.customize))]):t._e(),a("v-uni-view",{staticClass:"user-info-data"},[a("v-uni-text",{staticClass:"user-info-data-box",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goFanList(t.uid)}}},[a("v-uni-text",{staticClass:"user-data-num"},[t._v(t._s(t.fanNum))]),a("v-uni-text",{staticClass:"user-data-label"},[t._v("粉丝")])],1),a("v-uni-text",{staticClass:"user-info-data-box"},[a("v-uni-text",{staticClass:"user-data-num"},[t._v(t._s(t.contentsNum))]),a("v-uni-text",{staticClass:"user-data-label"},[t._v("文章")])],1),a("v-uni-text",{staticClass:"user-info-data-box"},[a("v-uni-text",{staticClass:"user-data-num"},[t._v(t._s(t.commentsNum))]),a("v-uni-text",{staticClass:"user-data-label"},[t._v("评论")])],1)],1)],1)],1),a("v-uni-view",{staticClass:"user-introduce"},[a("v-uni-text",{staticClass:"cuIcon-text"}),""!=t.introduce&&t.introduce?[t._v(t._s(t.subText(t.introduce,60)))]:[t._v("Ta还没有个人介绍哦")]],2)],1)],1)],1),a("v-uni-view",{staticClass:"search-type grid col-3"},[a("v-uni-view",{staticClass:"search-type-box",class:0==t.type?"active":"",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toType(0)}}},[a("v-uni-text",[t._v("文章")])],1),a("v-uni-view",{staticClass:"search-type-box",class:2==t.type?"active":"",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toType(2)}}},[a("v-uni-text",[t._v("动态")])],1),a("v-uni-view",{staticClass:"search-type-box",class:1==t.type?"active":"",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toType(1)}}},[a("v-uni-text",[t._v("评论")])],1)],1),0==t.type?a("v-uni-view",{staticClass:"cu-card article no-card"},[t._l(t.contentsList,(function(e,i){return 0==t.type?[a("articleItem",{key:i+"_0",attrs:{item:e}})]:t._e()})),t.contentsList.length>0?a("v-uni-view",{staticClass:"load-more",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.loadMore.apply(void 0,arguments)}}},[a("v-uni-text",[t._v(t._s(t.moreText))])],1):t._e(),0==t.contentsList.length?a("v-uni-view",{staticClass:"no-data"},[a("v-uni-text",{staticClass:"cuIcon-text"}),t._v("暂时没有数据")],1):t._e()],2):t._e(),2==t.type?a("v-uni-view",{staticClass:"search-space"},[0==t.spaceList.length?a("v-uni-view",{staticClass:"no-data"},[a("v-uni-text",{staticClass:"cuIcon-text"}),t._v("暂时没有动态")],1):t._e(),a("spaceItem",{attrs:{spaceList:t.spaceList}}),t.spaceList.length>0?a("v-uni-view",{staticClass:"load-more",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.loadMore.apply(void 0,arguments)}}},[a("v-uni-text",[t._v(t._s(t.moreText))])],1):t._e()],1):t._e(),1==t.type?a("v-uni-view",{staticClass:"cu-list menu-avatar"},[0==t.commentsList.length?a("v-uni-view",{staticClass:"no-data"},[a("v-uni-text",{staticClass:"cuIcon-text"}),t._v("暂时没有评论")],1):t._e(),a("v-uni-view",{staticClass:"cu-card dynamic no-card",staticStyle:{"margin-top":"20upx"}},[t._l(t.commentsList,(function(e,i){return t.commentsList.length>0?[a("commentItem",{key:i+"_0",attrs:{item:e,isHead:!1}})]:t._e()}))],2),t.commentsList.length>0?a("v-uni-view",{staticClass:"load-more",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.loadMore.apply(void 0,arguments)}}},[a("v-uni-text",[t._v(t._s(t.moreText))])],1):t._e()],1):t._e(),a("v-uni-view",{staticStyle:{width:"100%",height:"100upx","background-color":"#f6f6f6"}})],1),t.vid!=t.uid?a("v-uni-view",{staticClass:"userInfo-bottom-btn"},[a("v-uni-view",{staticClass:"userInfo-bottom-main grid col-2"},[a("v-uni-view",{staticClass:"userInfo-bottom-box",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.getPrivateChat()}}},[a("v-uni-view",{staticClass:"userInfo-tochat"},[a("v-uni-text",{staticClass:"cuIcon-mark"}),t._v("私聊")],1)],1),a("v-uni-view",{staticClass:"userInfo-bottom-box"},[1==t.isFollow?a("v-uni-button",{staticClass:"cu-btn bg-gradual-red",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.follow(0)}}},[a("v-uni-text",{staticClass:"cuIcon-check"}),t._v("已关注")],1):a("v-uni-button",{staticClass:"cu-btn bg-gradual-red",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.follow(1)}}},[a("v-uni-text",{staticClass:"cuIcon-add"}),t._v("关注Ta")],1)],1)],1)],1):t._e(),0==t.isLoading?a("v-uni-view",{staticClass:"loading"},[a("v-uni-view",{staticClass:"loading-main"},[a("v-uni-image",{attrs:{src:i("e5d4")}})],1)],1):t._e()],1)},s=[]},d230:function(t,e,i){"use strict";i("7a82");var a=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=a(i("ade3"));i("99af"),i("e9c4"),i("14d9"),i("ac1f"),i("5319");var n,o=i("cfbc"),c=a(i("212c")),u={data:function(){return{StatusBar:this.StatusBar,CustomBar:this.CustomBar,NavBar:this.StatusBar+this.CustomBar,AppStyle:this.$store.state.AppStyle,contentsList:[],commentsList:[],spaceList:[],userList:[],owo:c.default,owoList:[],type:0,page:1,moreText:"加载更多",isLoad:0,isLoading:0,title:"",uid:0,avatar:"",name:"",customize:"",lv:"",vip:"",isvip:"",introduce:"",fanNum:0,contentsNum:0,commentsNum:0,scrollTop:0,isFollow:0,vid:""}},onPageScroll:function(t){this.scrollTop=t.scrollTop},onShow:function(){if(o.localStorage.getItem("userinfo")){var t=JSON.parse(o.localStorage.getItem("userinfo"));this.vid=t.uid}},onReachBottom:function(){0==this.isLoad&&this.loadMore()},onPullDownRefresh:function(){var t=this.type;this.page=1,this.moreText="加载更多",this.isLoad=0,0==t?this.getContentsList(!1):1==t?this.getCommentsList(!1):this.getSpaceList(!1)},onLoad:function(t){this.title=t.title,this.uid=t.uid,this.avatar=t.avatar,this.name=t.name,this.getIsFollow(),this.getUserInfo(),this.getUserData();var e=this.owo.data,i=[];for(var a in e)i=i.concat(e[a].container);this.owoList=i,this.getContentsList(!1)},methods:(n={toType:function(t){this.type=t,this.page=1,this.moreText="加载更多",this.isLoad=0,0==t?this.getContentsList(!1):1==t?this.getCommentsList(!1):this.getSpaceList(!1)},goFanList:function(t){uni.navigateTo({url:"/pages/user/fanList?uid="+t})},back:function(){uni.navigateBack({delta:1})},getUserLv:function(t){if(!t)t=0;var e=this.$API.GetRankList();return e[t]},getUserLvStyle:function(t){if(!t)t=0;var e=this.$API.GetRankStyle(),i="color:#fff;background-color: "+e[t];return i},getUserInfo:function(){var t=this;t.$Net.request({url:t.$API.getUserInfo(),data:{key:t.uid},header:{"Content-Type":"application/x-www-form-urlencoded"},method:"get",dataType:"json",success:function(e){1==e.data.code&&(t.vip=e.data.data.vip,t.isvip=e.data.data.isvip,t.lv=e.data.data.lv,t.avatar=e.data.data.avatar,t.customize=e.data.data.customize,t.introduce=e.data.data.introduce)},fail:function(t){uni.showToast({title:"网络开小差了哦",icon:"none"})}})},loadMore:function(){this.moreText="正在加载中...",this.isLoad=1,0==this.type?this.getContentsList(!0):1==this.type?this.getCommentsList(!0):this.getSpaceList(!0)},reload:function(){0==this.type?this.getContentsList(!1):1==this.type?this.getCommentsList(!1):this.getSpaceList(!1)},getPrivateChat:function(){var t=this,e="";if(!o.localStorage.getItem("userinfo"))return uni.showToast({title:"请先登录",icon:"none"}),uni.navigateTo({url:"/pages/user/login"}),!1;var i=JSON.parse(o.localStorage.getItem("userinfo"));e=i.token;var a=t.uid,s={touid:a,token:e};uni.showLoading({title:"加载中"}),t.$Net.request({url:t.$API.getPrivateChat(),data:s,header:{"Content-Type":"application/x-www-form-urlencoded"},method:"get",dataType:"json",success:function(e){if(setTimeout((function(){uni.hideLoading()}),1e3),1==e.data.code){var i=t.name,a=t.uid,s=e.data.data;uni.redirectTo({url:"/pages/chat/chat?uid="+a+"&name="+i+"&chatid="+s})}else uni.showToast({title:e.data.msg,icon:"none"})},fail:function(t){setTimeout((function(){uni.hideLoading()}),1e3),uni.showToast({title:"网络开小差了哦",icon:"none"})}})},getUserData:function(){var t=this;t.$Net.request({url:t.$API.getUserData(),data:{uid:t.uid},header:{"Content-Type":"application/x-www-form-urlencoded"},method:"get",dataType:"json",success:function(e){1==e.data.code&&(t.fanNum=e.data.data.fanNum,t.contentsNum=e.data.data.contentsNum,t.commentsNum=e.data.data.commentsNum)},fail:function(t){uni.showToast({title:"网络开小差了哦",icon:"none"})}})},getContentsList:function(t){var e=this,i={type:"post",authorId:e.uid},a=e.page;t&&a++,e.$Net.request({url:e.$API.getContentsList(),data:{searchParams:JSON.stringify(e.$API.removeObjectEmptyKey(i)),limit:8,page:a,order:"created"},header:{"Content-Type":"application/x-www-form-urlencoded"},method:"get",dataType:"json",success:function(i){if(uni.stopPullDownRefresh(),e.isLoad=0,e.moreText="加载更多",1==i.data.code){var a=i.data.data;a.length>0?t?(e.page++,e.contentsList=e.contentsList.concat(a)):e.contentsList=a:e.moreText="没有更多数据了"}setTimeout((function(){e.isLoading=1,clearTimeout("timer")}),300)},fail:function(t){uni.stopPullDownRefresh(),e.moreText="加载更多",e.isLoad=0;setTimeout((function(){e.isLoading=1,clearTimeout("timer")}),300)}})},getCommentsList:function(t){var e=this,i={type:"comment",authorId:e.uid},a=e.page;t&&a++,e.$Net.request({url:e.$API.getCommentsList(),data:{searchParams:JSON.stringify(e.$API.removeObjectEmptyKey(i)),limit:5,page:a,order:"created"},header:{"Content-Type":"application/x-www-form-urlencoded"},method:"get",dataType:"json",success:function(i){if(uni.stopPullDownRefresh(),e.isLoad=0,1==i.data.code){var a=i.data.data;if(a.length>0){var s=[];for(var n in a){var o=a[n];o.style="background-image:url("+a[n].avatar+");",s.push(o)}t?(e.page++,e.commentsList=e.commentsList.concat(s)):e.commentsList=s}else e.moreText="没有更多数据了"}setTimeout((function(){e.isLoading=1,clearTimeout("timer")}),300)},fail:function(t){uni.stopPullDownRefresh(),e.isLoad=0,e.moreText="加载更多";setTimeout((function(){e.isLoading=1,clearTimeout("timer")}),300)}})},getIsFollow:function(){var t=this,e="";if(o.localStorage.getItem("userinfo")){var i=JSON.parse(o.localStorage.getItem("userinfo"));e=i.token}var a={token:e,touid:t.uid};t.$Net.request({url:t.$API.isFollow(),data:a,header:{"Content-Type":"application/x-www-form-urlencoded"},method:"get",dataType:"json",success:function(e){t.isFollow=e.data.code},fail:function(t){uni.showToast({title:"网络开小差了哦",icon:"none"})}})},follow:function(t){var e=this,i="";if(!o.localStorage.getItem("userinfo"))return uni.showToast({title:"请先登录",icon:"none"}),uni.navigateTo({url:"/pages/user/login"}),!1;var a=JSON.parse(o.localStorage.getItem("userinfo"));i=a.token;var s={token:i,touid:e.uid,type:t};e.isFollow=t,uni.showLoading({title:"加载中"}),e.$Net.request({url:e.$API.follow(),data:s,header:{"Content-Type":"application/x-www-form-urlencoded"},method:"get",dataType:"json",success:function(t){setTimeout((function(){uni.hideLoading()}),1e3),uni.showToast({title:t.data.msg,icon:"none"}),e.getIsFollow()},fail:function(t){setTimeout((function(){uni.hideLoading()}),1e3),uni.showToast({title:"网络开小差了哦",icon:"none"}),e.getIsFollow()}})},commentsAdd:function(t,e,i){var a=this.cid;uni.navigateTo({url:"/pages/contents/commentsadd?cid="+a+"&coid="+e+"&title="+t+"&isreply="+i})},toPost:function(){uni.navigateTo({url:"/pages/user/post"})},toEdit:function(t){uni.navigateTo({url:"/pages/user/post?type=edit&cid="+t})}},(0,s.default)(n,"getUserLv",(function(t){var e=this.$API.GetRankList();return e[t]})),(0,s.default)(n,"getUserLvStyle",(function(t){var e=this.$API.GetRankStyle(),i="color:#fff;background-color: "+e[t];return i})),(0,s.default)(n,"toInfo",(function(t){uni.navigateTo({url:"/pages/contents/info?cid="+t.cid+"&title="+t.title})})),(0,s.default)(n,"toInfoComment",(function(t,e){uni.navigateTo({url:"/pages/contents/info?cid="+t+"&title="+e})})),(0,s.default)(n,"toSearch",(function(){uni.redirectTo({url:"/pages/contents/search"})})),(0,s.default)(n,"ToCopy",(function(t){var e=document.createElement("textarea");e.value=t,e.readOnly="readOnly",document.body.appendChild(e),e.select(),e.setSelectionRange(0,t.length),uni.showToast({title:"复制成功"});document.execCommand("copy");e.remove()})),(0,s.default)(n,"formatNumber",(function(t){return t>=1e3&&t<1e4?(t/1e3).toFixed(1)+"k":t>=1e4?(t/1e4).toFixed(1)+"w":t})),(0,s.default)(n,"replaceSpecialChar",(function(t){return!!t&&(t=t.replace(/&quot;/g,'"'),t=t.replace(/&amp;/g,"&"),t=t.replace(/&lt;/g,"<"),t=t.replace(/&gt;/g,">"),t=t.replace(/&nbsp;/g," "),t)})),(0,s.default)(n,"subText",(function(t,e){return t?t.length>e?(t=t.substring(0,e),t+"……"):t:"Ta还没有个人介绍哦"})),(0,s.default)(n,"getSpaceList",(function(t){var e=this,i="";if(o.localStorage.getItem("userinfo")){var a=JSON.parse(o.localStorage.getItem("userinfo"));i=a.token}var s=e.page;t&&s++;var n={uid:e.uid};e.$Net.request({url:e.$API.spaceList(),data:{searchParams:JSON.stringify(e.$API.removeObjectEmptyKey(n)),limit:10,page:s,order:"created",token:i},method:"get",dataType:"json",success:function(i){if(e.changeLoading=1,e.isLoad=0,e.moreText="加载更多",t||(e.dataLoad=!0),1==i.data.code){var a,s=i.data.data;for(var n in s){if(0==s[n].type)if(s[n].pic){var o=s[n].pic;s[n].picList=o.split("||")}else s[n].picList=[];if(2==s[n].type)if(s[n].forwardJson.pic){o=s[n].forwardJson.pic;s[n].forwardJson.picList=o.split("||")}else s[n].forwardJson.picList=[]}a=s,s.length>0?t?(e.page++,e.spaceList=e.spaceList.concat(a)):e.spaceList=a:e.moreText="没有更多动态了"}},fail:function(t){e.changeLoading=1,e.isLoad=0,e.moreText="加载更多";setTimeout((function(){e.isLoading=1,clearTimeout("timer")}),300)}})})),n)};e.default=u},e5d4:function(t,e,i){t.exports=i.p+"static/img/loading.edead6c4.gif"}}]);