(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-userrecharge"],{"0c95":function(t,e,a){var i=a("223f");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("4f06").default;n("133d79d6",i,!0,{sourceMap:!1,shadowMode:!1})},"223f":function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,".waves[data-v-235bc8a0]{position:relative;overflow:hidden}.waves .waves-ripple[data-v-235bc8a0]{position:absolute;border-radius:100%;background-clip:padding-box;pointer-events:none;-webkit-user-select:none;user-select:none;-webkit-transform:scale(0);transform:scale(0);opacity:1}.waves .active[data-v-235bc8a0]{opacity:0;-webkit-transform:scale(2);transform:scale(2);transition:opacity 1s ease-out,-webkit-transform .3s ease-out;transition:opacity 1s ease-out,transform .3s ease-out;transition:opacity 1s ease-out,transform .3s ease-out,-webkit-transform .3s ease-out}",""]),t.exports=e},"3a8c":function(t,e,a){"use strict";a.r(e);var i=a("66d6"),n=a.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(o);e["default"]=n.a},"3fc8":function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,"uni-page-body[data-v-5f9b5dd0]{background-color:#fff}body.?%PAGE?%[data-v-5f9b5dd0]{background-color:#fff}",""]),t.exports=e},"5f6e":function(t,e,a){"use strict";a("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("d3b7"),a("ac1f");var i=0,n={props:{wavesColor:{type:String,default:"rgba(0, 0, 0, .15)"},itemClass:{type:String,default:""}},data:function(){return i++,{rippleTop:0,rippleLeft:0,field:{},active:Boolean,wavesId:"waves_"+i}},methods:{onTap:function(t){this.$emit("onTap")},onTouchstart:function(t){var e=this;this.active=!1,this.$nextTick((function(){e.activeWaves(t)}))},activeWaves:function(t){var e=this;this.getClientRect().then((function(a){var i,n;a.height&&(a.finalWidth=a.height>a.width?a.height:a.width,a.finalWidth&&(e.field=a,i=t.touches[0].clientX,n=t.touches[0].clientY,e.rippleTop=n-a.top-a.finalWidth/2,e.rippleLeft=i-a.left-a.finalWidth/2,e.$nextTick((function(){e.active=!0}))))}))},getClientRect:function(){var t=this;return new Promise((function(e){var a=uni.createSelectorQuery().in(t),i="#"+t.wavesId;a.select(i).boundingClientRect((function(t){e(t)})).exec()}))}}};e.default=n},"66d6":function(t,e,a){"use strict";(function(t){a("7a82");var i=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("ac1f"),a("00b4"),a("e9c4"),a("5319");var n=i(a("c3fc")),o=a("0af4"),s={data:function(){return{StatusBar:this.StatusBar,CustomBar:this.CustomBar,NavBar:this.StatusBar+this.CustomBar,AppStyle:this.$store.state.AppStyle,userInfo:null,token:"",payType:0,isToPay:0,num:"",ePayType:"alipay",toEpayType:!1,codeImg:"",alipayUrl:"",wxpayUrl:"",vipDiscount:0,vipPrice:0,scale:0}},onPullDownRefresh:function(){},onShow:function(){o.localStorage.getItem("userinfo")&&(this.userInfo=JSON.parse(o.localStorage.getItem("userinfo")),this.userInfo.style="background-image:url("+this.userInfo.avatar+");"),o.localStorage.getItem("token")&&(this.token=o.localStorage.getItem("token")),this.getVipInfo()},onLoad:function(){},methods:{back:function(){uni.navigateBack({delta:1})},toPayType:function(t){this.payType=t,this.num="",this.isToPay=0,this.codeImg=""},isPositiveInteger:function(t){return/^[0-9]+$/.test(t)},pay:function(){var e=this;return e.isPositiveInteger(e.num)&&""!=e.num?e.num<1?(uni.showToast({title:"最低充值金额5元",icon:"none"}),!1):void uni.showModal({title:"确定要充值该金额吗？",success:function(a){a.confirm?(0==e.payType&&e.aliPay(),1==e.payType&&e.wxPay()):a.cancel&&t.log("用户点击取消")}}):(uni.showToast({title:"充值金额只能为正整数",icon:"none"}),!1)},aliPay:function(){var t=this,e="";if(o.localStorage.getItem("userinfo")){var a=JSON.parse(o.localStorage.getItem("userinfo"));e=a.token}var i={num:t.num,token:e};uni.showLoading({title:"加载中"}),t.$Net.request({url:t.$API.scancodePay(),data:i,header:{"Content-Type":"application/x-www-form-urlencoded"},method:"get",dataType:"json",success:function(e){if(setTimeout((function(){uni.hideLoading()}),1e3),1==e.data.code){var a=e.data.data;t.alipayUrl="alipays://platformapi/startapp?appId=20000067&url="+encodeURI(a),t.codeImg=t.$API.qrCode()+"?codeContent="+a,t.isToPay=1,t.toAlipay()}else uni.showToast({title:"支付接口异常",icon:"none"})},fail:function(t){setTimeout((function(){uni.hideLoading()}),1e3),uni.showToast({title:"网络开小差了哦",icon:"none"})}})},wxPay:function(){var e=this,a="";if(o.localStorage.getItem("userinfo")){var i=JSON.parse(o.localStorage.getItem("userinfo"));a=i.token}var n={price:e.num,token:a};uni.showLoading({title:"加载中"}),e.$Net.request({url:e.$API.wxPay(),data:n,header:{"Content-Type":"application/x-www-form-urlencoded"},method:"get",dataType:"json",success:function(a){if(t.log(JSON.stringify(a)),setTimeout((function(){uni.hideLoading()}),1e3),1==a.data.code){var i=a.data.data.data;e.wxpayUrl=i,e.codeImg=e.$API.qrCode()+"?codeContent="+i,e.isToPay=1,e.toWxpay()}else uni.showToast({title:"支付接口异常",icon:"none"})},fail:function(t){setTimeout((function(){uni.hideLoading()}),1e3),uni.showToast({title:"网络开小差了哦",icon:"none"})}})},tokenPay:function(){var t=this,e="";if(o.localStorage.getItem("userinfo")){var a=JSON.parse(o.localStorage.getItem("userinfo"));e=a.token}if(""==t.num)return uni.showToast({title:"请输入充值码！",icon:"none"}),!1;var i={key:t.num,token:e};uni.showLoading({title:"加载中"}),t.$Net.request({url:t.$API.tokenPay(),data:i,header:{"Content-Type":"application/x-www-form-urlencoded"},method:"get",dataType:"json",success:function(e){if(setTimeout((function(){uni.hideLoading()}),1e3),uni.showToast({title:e.data.msg,icon:"none"}),1==e.data.code)setTimeout((function(){t.back(),clearTimeout("timer")}),1e3)},fail:function(t){setTimeout((function(){uni.hideLoading()}),1e3),uni.showToast({title:"网络开小差了哦",icon:"none"})}})},toAlipay:function(){var t=this.alipayUrl;window.open(t)},toWxpay:function(){var t=this.wxpayUrl;window.open(t)},dtImg:function(){this.codeImg;uni.showToast({title:"请长按二维码图片保存",icon:"none"})},getVipInfo:function(){var t=this;t.$Net.request({url:t.$API.getVipInfo(),header:{"Content-Type":"application/x-www-form-urlencoded"},method:"get",dataType:"json",success:function(e){1==e.data.code&&(t.vipDiscount=e.data.data.vipDiscount,t.vipPrice=e.data.data.vipPrice,t.scale=e.data.data.scale);setTimeout((function(){t.isLoading=1,clearTimeout("timer")}),300)},fail:function(e){setTimeout((function(){t.isLoading=1,clearTimeout("timer")}),300)}})},toEpay:function(){var t=this.ePayType,e="";if(o.localStorage.getItem("userinfo")){var a=JSON.parse(o.localStorage.getItem("userinfo"));e=a.token}if(!this.isPositiveInteger(this.num)||""==this.num)return uni.showToast({title:"充值金额只能为正整数",icon:"none"}),!1;if(this.num<5)return uni.showToast({title:"最低充值金额5元",icon:"none"}),!1;var i={money:this.num,device:"mobile",type:t,token:e};uni.showLoading({title:"加载中"}),this.$Net.request({url:this.$API.EPay(),data:i,header:{"Content-Type":"application/x-www-form-urlencoded"},method:"get",dataType:"json",success:function(t){if(setTimeout((function(){uni.hideLoading()}),1e3),1==t.data.code){var e=t.data.payapi,a="";if(t.data.data.payurl){a=t.data.data.payurl;var i=a.substring(0,2);"./"==i&&(a=a.replace("./",""),a=e+a)}t.data.data.qrcode&&(a=t.data.data.qrcode),window.open(a)}else uni.showToast({title:t.data.msg,icon:"none"})},fail:function(t){setTimeout((function(){uni.hideLoading()}),1e3),uni.showToast({title:"网络开小差了哦",icon:"none"})}})},setEPayType:function(t){this.ePayType=t,this.toEpayType=!1},getTypeText:function(t){return"alipay"==t?"支付宝":"wxpay"==t?"微信支付":"qqpay"==t?"QQ钱包":void 0}},components:{waves:n.default}};e.default=s}).call(this,a("5a52")["default"])},"6b46":function(t,e,a){"use strict";a.r(e);var i=a("5f6e"),n=a.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(o);e["default"]=n.a},8839:function(t,e,a){"use strict";var i=a("0c95"),n=a.n(i);n.a},c3fc:function(t,e,a){"use strict";a.r(e);var i=a("f686"),n=a("6b46");for(var o in n)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(o);a("8839");var s=a("f0c5"),u=Object(s["a"])(n["default"],i["b"],i["c"],!1,null,"235bc8a0",null,!1,i["a"],void 0);e["default"]=u.exports},da00:function(t,e,a){var i=a("3fc8");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("4f06").default;n("21241129",i,!0,{sourceMap:!1,shadowMode:!1})},dc32:function(t,e,a){"use strict";var i=a("da00"),n=a.n(i);n.a},dd16:function(t,e,a){"use strict";a.r(e);var i=a("f3a7"),n=a("3a8c");for(var o in n)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(o);a("dc32");var s=a("f0c5"),u=Object(s["a"])(n["default"],i["b"],i["c"],!1,null,"5f9b5dd0",null,!1,i["a"],void 0);e["default"]=u.exports},f3a7:function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"user",class:t.AppStyle},[a("v-uni-view",{staticClass:"header",style:[{height:t.CustomBar+"px"}]},[a("v-uni-view",{staticClass:"cu-bar bg-white",style:{height:t.CustomBar+"px","padding-top":t.StatusBar+"px"}},[a("v-uni-view",{staticClass:"action",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.back.apply(void 0,arguments)}}},[a("v-uni-text",{staticClass:"cuIcon-back"})],1),a("v-uni-view",{staticClass:"content text-bold",style:[{top:t.StatusBar+"px"}]},[t._v("在线充值")]),a("v-uni-view",{staticClass:"action"})],1)],1),a("v-uni-view",{style:[{padding:t.NavBar+"px 10px 0px 10px"}]}),a("v-uni-view",{staticClass:"data-box userrecharge"},[a("v-uni-view",{staticClass:"userrecharge-type"},[a("v-uni-text",{staticClass:"cu-btn text-blue radius",class:"0"==t.payType?"active":"",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toPayType(0)}}},[t._v("支付宝")]),a("v-uni-text",{staticClass:"cu-btn text-blue radius",class:"1"==t.payType?"active":"",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toPayType(1)}}},[t._v("微信支付")]),a("v-uni-text",{staticClass:"cu-btn text-blue radius",class:"2"==t.payType?"active":"",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toPayType(2)}}},[t._v("卡密充值")]),a("v-uni-text",{staticClass:"cu-btn text-blue radius",class:"3"==t.payType?"active":"",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toPayType(3)}}},[t._v("易支付")])],1),1==t.payType||0==t.payType?[0==t.isToPay?[a("v-uni-view",{staticClass:"userrecharge-form"},[a("v-uni-input",{attrs:{placeholder:"请输入充值金额(￥),最低5元",type:"number",name:"input"},model:{value:t.num,callback:function(e){t.num=e},expression:"num"}}),a("v-uni-button",{staticClass:"cu-btn bg-yellow radius",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.pay.apply(void 0,arguments)}}},[t._v("确定充值")])],1)]:t._e(),1==t.isToPay?[a("v-uni-view",{staticClass:"userrecharge-code"},[a("v-uni-image",{attrs:{src:t.codeImg}})],1),a("v-uni-view",{staticClass:"userrecharge-btn"},[a("v-uni-text",{staticClass:"cu-btn bg-cyan radius",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.dtImg.apply(void 0,arguments)}}},[t._v("保存二维码")]),"0"==t.payType?a("v-uni-text",{staticClass:"cu-btn bg-yellow radius",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toAlipay()}}},[t._v("打开支付宝")]):t._e(),"1"==t.payType?a("v-uni-text",{staticClass:"cu-btn bg-yellow radius",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toWxpay()}}},[t._v("打开微信")]):t._e()],1)]:t._e()]:t._e(),2==t.payType?[0==t.isToPay?[a("v-uni-view",{staticClass:"userrecharge-form"},[a("v-uni-input",{attrs:{placeholder:"请填入充值码",name:"input",type:"text"},model:{value:t.num,callback:function(e){t.num=e},expression:"num"}}),a("v-uni-button",{staticClass:"cu-btn bg-yellow radius",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.tokenPay.apply(void 0,arguments)}}},[t._v("确定充值")])],1)]:t._e()]:t._e(),3==t.payType?[a("v-uni-view",{staticClass:"userrecharge-form toEpay"},[a("v-uni-view",{staticClass:"toEpayType"},[a("v-uni-view",{staticClass:"toEpayType-cur",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toEpayType=!t.toEpayType}}},[t._v(t._s(t.getTypeText(t.ePayType))),a("v-uni-text",{staticClass:"cuIcon-triangledownfill"})],1),t.toEpayType?a("v-uni-view",{staticClass:"toEpayType-main"},[a("v-uni-view",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.setEPayType("alipay")}}},[t._v("支付宝")]),a("v-uni-view",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.setEPayType("wxpay")}}},[t._v("微信")]),a("v-uni-view",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.setEPayType("qqpay")}}},[t._v("QQ红包")])],1):t._e()],1),a("v-uni-input",{attrs:{placeholder:"请输入充值金额(￥),最低5元",name:"input",type:"text"},model:{value:t.num,callback:function(e){t.num=e},expression:"num"}}),a("v-uni-button",{staticClass:"cu-btn bg-yellow radius",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toEpay()}}},[t._v("确定充值")])],1)]:t._e(),1==t.payType||0==t.payType?a("v-uni-view",{staticClass:"userrecharge-intro"},[a("v-uni-view",{staticClass:"userrecharge-intro-title"},[t._v("充值注意：")]),a("v-uni-view",{staticClass:"userrecharge-intro-text"},[t._v("1.如果支付软件未成功开启，可尝试保存二维码再进行扫码支付，部分设备可能无权限打开支付宝或微信。")]),a("v-uni-view",{staticClass:"userrecharge-intro-text"},[t._v("2.充值金额与网站积分的比例为"),a("v-uni-text",{staticClass:"text-red text-bold"},[t._v("1:"+t._s(t.scale))]),t._v("，最低充值金额"),a("v-uni-text",{staticClass:"text-red text-bold"},[t._v("5")]),t._v("元。")],1),a("v-uni-view",{staticClass:"userrecharge-intro-text"},[t._v("3.如果充值金额未到账，请查看账户中的充值记录，并立即反馈。")]),1==t.payType?a("v-uni-view",{staticClass:"userrecharge-intro-text"},[t._v("4.微信"),a("v-uni-text",{staticClass:"text-red text-bold"},[t._v("不支持从相册识别二维码支付")]),t._v("，如选择保存二维码支付，请将二维码上传到其它设备，再进行正常扫码支付。")],1):t._e()],1):t._e(),2==t.payType?a("v-uni-view",{staticClass:"userrecharge-intro"},[a("v-uni-view",{staticClass:"userrecharge-intro-title"},[t._v("充值注意：")]),a("v-uni-view",{staticClass:"userrecharge-intro-text"},[t._v("1.请填写正确的充值码，注意空格与特殊符号。")]),a("v-uni-view",{staticClass:"userrecharge-intro-text"},[t._v("2.充值金额与网站积分的比例为"),a("v-uni-text",{staticClass:"text-red text-bold"},[t._v("1:"+t._s(t.scale))]),t._v("。")],1),a("v-uni-view",{staticClass:"userrecharge-intro-text"},[t._v("3.充值码在进行充值操作后，将失效。")])],1):t._e(),3==t.payType?a("v-uni-view",{staticClass:"userrecharge-intro"},[a("v-uni-view",{staticClass:"userrecharge-intro-title"},[t._v("充值注意：")]),a("v-uni-view",{staticClass:"userrecharge-intro-text"},[t._v("1.易支付可选择三种交易平台，分别为支付宝，微信，QQ钱包。")]),a("v-uni-view",{staticClass:"userrecharge-intro-text"},[t._v("2.充值金额与网站积分的比例为"),a("v-uni-text",{staticClass:"text-red text-bold"},[t._v("1:"+t._s(t.scale))]),t._v("，最低充值金额"),a("v-uni-text",{staticClass:"text-red text-bold"},[t._v("5")]),t._v("元。")],1),a("v-uni-view",{staticClass:"userrecharge-intro-text"},[t._v("3.如果充值金额未到账，请查看账户中的充值记录，并立即反馈。")])],1):t._e()],2)],1)},n=[]},f686:function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"waves",class:t.itemClass,attrs:{id:t.wavesId},on:{touchstart:function(e){arguments[0]=e=t.$handleEvent(e),t.onTouchstart(e)},click:function(e){arguments[0]=e=t.$handleEvent(e),t.onTap.apply(void 0,arguments)}}},[t._t("default"),a("v-uni-view",{staticClass:"waves-ripple",class:{active:t.active},style:{top:t.rippleTop+"px",left:t.rippleLeft+"px",width:t.field.finalWidth+"px",height:t.field.finalWidth+"px","background-color":t.wavesColor}})],2)},n=[]}}]);