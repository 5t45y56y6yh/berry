(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-login"],{"37dce":function(t,e,n){"use strict";n.r(e);var i=n("39e3"),o=n("9bcf");for(var a in o)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(a);var s=n("f0c5"),u=Object(s["a"])(o["default"],i["b"],i["c"],!1,null,"4735b92b",null,!1,i["a"],void 0);e["default"]=u.exports},"39e3":function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){}));var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"user",class:t.AppStyle},[n("v-uni-view",{staticClass:"header",style:[{height:t.CustomBar+"px"}]},[n("v-uni-view",{staticClass:"cu-bar bg-white",style:{height:t.CustomBar+"px","padding-top":t.StatusBar+"px"}},[n("v-uni-view",{staticClass:"action",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.back.apply(void 0,arguments)}}},[n("v-uni-text",{staticClass:"cuIcon-back"})],1),n("v-uni-view",{staticClass:"content text-bold",style:[{top:t.StatusBar+"px"}]},[t._v("用户登录")]),n("v-uni-view",{staticClass:"action",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toRegister.apply(void 0,arguments)}}},[n("v-uni-text",[t._v("注册")])],1)],1)],1),n("v-uni-view",{style:[{padding:t.NavBar+"px 10px 0px 10px"}]}),n("v-uni-view",{staticClass:"user-form"},[n("v-uni-form",[n("v-uni-view",{staticClass:"cu-form-group"},[n("v-uni-input",{attrs:{name:"input",placeholder:"用户名"},model:{value:t.userName,callback:function(e){t.userName=e},expression:"userName"}})],1),n("v-uni-view",{staticClass:"cu-form-group"},[n("v-uni-input",{attrs:{name:"input",placeholder:"用户密码",type:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),n("v-uni-view",{staticClass:"user-btn flex flex-direction"},[n("v-uni-button",{staticClass:"cu-btn bg-blue margin-tb-sm lg",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.login.apply(void 0,arguments)}}},[t._v("立即登录")])],1)],1)],1),n("v-uni-view",{staticClass:"user-foget"},[n("v-uni-text",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toFoget.apply(void 0,arguments)}}},[t._v("忘记密码？")])],1)],1)},o=[]},"47eb":function(t,e,n){"use strict";(function(t){n("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("e9c4");var i=n("cfbc"),o={data:function(){return{StatusBar:this.StatusBar,CustomBar:this.CustomBar,NavBar:this.StatusBar+this.CustomBar,AppStyle:this.$store.state.AppStyle,userName:"",password:""}},onPullDownRefresh:function(){},onShow:function(){},onLoad:function(){},methods:{back:function(){uni.navigateBack({delta:1})},getCID:function(){},setClientId:function(t){var e="";if(!i.localStorage.getItem("token"))return!1;e=i.localStorage.getItem("token"),this.$Net.request({url:this.$API.setClientId(),data:{clientId:t,token:e},header:{"Content-Type":"application/x-www-form-urlencoded"},method:"get",dataType:"json",success:function(t){t.data.code},fail:function(t){uni.showToast({title:"网络开小差了哦",icon:"none"})}})},login:function(){var t=this;if(""==this.password||""==this.userName)return uni.showToast({title:"请输入正确的参数",icon:"none",duration:1e3,position:"bottom"}),!1;var e={name:this.userName,password:this.password};uni.showLoading({title:"加载中"}),t.$Net.request({url:t.$API.userLogin(),data:{params:JSON.stringify(t.$API.removeObjectEmptyKey(e))},header:{"Content-Type":"application/x-www-form-urlencoded"},method:"post",dataType:"json",success:function(e){if(setTimeout((function(){uni.hideLoading()}),1e3),uni.showToast({title:e.data.msg,icon:"none"}),1==e.data.code){i.localStorage.setItem("userinfo",JSON.stringify(e.data.data)),i.localStorage.setItem("token",e.data.data.token),t.getCID();setTimeout((function(){uni.switchTab({url:"/pages/home/home"}),clearTimeout("timer")}),1e3)}},fail:function(t){setTimeout((function(){uni.hideLoading()}),1e3),uni.showToast({title:"网络开小差了哦",icon:"none"}),uni.stopPullDownRefresh()}})},toRegister:function(){uni.navigateTo({url:"/pages/user/register"})},toFoget:function(){uni.navigateTo({url:"/pages/user/foget"})},toQQlogin:function(){var e=this;uni.login({provider:"qq",success:function(n){n.code;uni.getUserInfo({provider:"qq",success:function(n){var o={nickName:n.userInfo.nickname,appLoginType:"qq",headImgUrl:n.userInfo.figureurl_qq_2};uni.showLoading({title:"加载中"}),e.$Net.request({url:e.$API.userApi(),data:{params:JSON.stringify(e.$API.removeObjectEmptyKey(o))},header:{"Content-Type":"application/x-www-form-urlencoded"},method:"get",dataType:"json",success:function(e){if(t.log(e),setTimeout((function(){uni.hideLoading()}),1e3),uni.showToast({title:e.data.msg,icon:"none"}),1==e.data.code){i.localStorage.setItem("userinfo",JSON.stringify(e.data.data)),i.localStorage.setItem("token",e.data.data.token);setTimeout((function(){uni.switchTab({url:"/pages/home/home"}),clearTimeout("timer")}),1e3)}},fail:function(t){setTimeout((function(){uni.hideLoading()}),1e3),uni.showToast({title:"网络开小差了哦",icon:"none"}),uni.stopPullDownRefresh()}})}})},fail:function(t){uni.showToast({title:"请求出错啦！",icon:"none",duration:3e3}),setTimeout((function(){uni.hideLoading()}),1e3)}})},toWexinlogin:function(){var t=this;uni.login({provider:"weixin",success:function(e){e.code;uni.getUserInfo({provider:"weixin",success:function(e){var n={nickName:e.userInfo.nickName,appLoginType:"weixin",headImgUrl:e.userInfo.avatarUrl};uni.showLoading({title:"加载中"}),t.$Net.request({url:t.$API.userApi(),data:{params:JSON.stringify(t.$API.removeObjectEmptyKey(n))},header:{"Content-Type":"application/x-www-form-urlencoded"},method:"get",dataType:"json",success:function(t){if(setTimeout((function(){uni.hideLoading()}),1e3),uni.showToast({title:t.data.msg,icon:"none"}),1==t.data.code){i.localStorage.setItem("userinfo",JSON.stringify(t.data.data)),i.localStorage.setItem("token",t.data.data.token);setTimeout((function(){uni.switchTab({url:"/pages/home/home"}),clearTimeout("timer")}),1e3)}},fail:function(t){setTimeout((function(){uni.hideLoading()}),1e3),uni.showToast({title:"网络开小差了哦",icon:"none"}),uni.stopPullDownRefresh()}})}})},fail:function(t){uni.showToast({title:"请求出错啦！",icon:"none",duration:3e3}),setTimeout((function(){uni.hideLoading()}),1e3)}})},toWeibologin:function(){var t=this;uni.login({provider:"sinaweibo",success:function(e){var n;n=e.authResult.access_token,uni.getUserInfo({provider:"sinaweibo",success:function(e){var o={nickName:e.userInfo.nickname,headImgUrl:e.userInfo.avatar_large,openId:e.userInfo.id,accessToken:n,appLoginType:"SINAWEIBO"};uni.showLoading({title:"加载中"}),t.$Net.request({url:t.$API.userApi(),data:{params:JSON.stringify(t.$API.removeObjectEmptyKey(o))},header:{"Content-Type":"application/x-www-form-urlencoded"},method:"get",dataType:"json",success:function(t){if(setTimeout((function(){uni.hideLoading()}),1e3),uni.showToast({title:t.data.msg,icon:"none"}),1==t.data.code){i.localStorage.setItem("userinfo",JSON.stringify(t.data.data)),i.localStorage.setItem("token",t.data.data.token);setTimeout((function(){uni.switchTab({url:"/pages/home/home"}),clearTimeout("timer")}),1e3)}},fail:function(t){setTimeout((function(){uni.hideLoading()}),1e3),uni.showToast({title:"网络开小差了哦",icon:"none"}),uni.stopPullDownRefresh()}})}})},fail:function(t){uni.showToast({title:"请求出错啦！",icon:"none",duration:3e3}),setTimeout((function(){uni.hideLoading()}),1e3)}})}}};e.default=o}).call(this,n("5a52")["default"])},"9bcf":function(t,e,n){"use strict";n.r(e);var i=n("47eb"),o=n.n(i);for(var a in i)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(a);e["default"]=o.a}}]);